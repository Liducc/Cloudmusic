{"ast":null,"code":"import { getIcon } from \"@/request/api/home.js\";\nimport { reactive, ref, onMounted } from \"vue\";\nexport default {\n  setup() {\n    const images = reactive({\n      list: []\n    });\n    const touchStartX = ref(0);\n    const touchEndX = ref(0);\n    const scrollBarWidth = ref(0);\n    onMounted(async () => {\n      try {\n        const res = await getIcon();\n        images.list = res.data.data;\n        scrollBarWidth.value = images.list.length * 100 / 5;\n      } catch (error) {\n        console.error(error);\n      }\n    });\n    function handleTouchStart(event) {\n      touchStartX.value = event.touches[0].clientX;\n    }\n    function handleTouchEnd(event) {\n      touchEndX.value = event.changedTouches[0].clientX;\n      handleSwipe();\n    }\n    function handleSwipe() {\n      if (touchEndX.value - touchStartX.value > 100) {\n        images.list.forEach((image, index) => {\n          if (index < 5) {\n            images.list[index].hidden = true;\n          } else {\n            images.list[index].hidden = false;\n          }\n        });\n      } else if (touchStartX.value - touchEndX.value > 100) {\n        images.list.forEach((image, index) => {\n          if (index < 5) {\n            images.list[index].hidden = false;\n          } else {\n            images.list[index].hidden = true;\n          }\n        });\n      }\n    }\n    return {\n      images,\n      handleTouchStart,\n      handleTouchEnd,\n      scrollBarWidth\n    };\n  }\n};","map":{"version":3,"names":["getIcon","reactive","ref","onMounted","setup","images","list","touchStartX","touchEndX","scrollBarWidth","res","data","value","length","error","console","handleTouchStart","event","touches","clientX","handleTouchEnd","changedTouches","handleSwipe","forEach","image","index","hidden"],"sources":["E:\\musicdemo\\Cloudmusic\\cloudmusic-app\\src\\components\\home\\IconList.vue"],"sourcesContent":["<template>\r\n    <div class=\"swipe\" @touchstart=\"handleTouchStart\" @touchend=\"handleTouchEnd\">\r\n        <span v-for=\"(ima, index) in images.list\" :key=\"index\" :class=\"{ hidden: index >= 5 }\">\r\n            <img :src=\"ima.iconUrl\" />\r\n            <p>{{ ima.name }}</p>\r\n        </span>\r\n        <div class=\"scrollBar\" :style=\"{ width: scrollBarWidth + 'px' }\"></div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { getIcon } from \"@/request/api/home.js\";\r\nimport { reactive, ref, onMounted } from \"vue\";\r\n\r\nexport default {\r\n    setup() {\r\n        const images = reactive({\r\n            list: []\r\n        });\r\n\r\n        const touchStartX = ref(0);\r\n        const touchEndX = ref(0);\r\n        const scrollBarWidth = ref(0);\r\n\r\n        onMounted(async () => {\r\n            try {\r\n                const res = await getIcon();\r\n                images.list = res.data.data;\r\n                scrollBarWidth.value = (images.list.length * 100) / 5;\r\n            } catch (error) {\r\n                console.error(error);\r\n            }\r\n        });\r\n\r\n        function handleTouchStart(event) {\r\n            touchStartX.value = event.touches[0].clientX;\r\n        }\r\n\r\n        function handleTouchEnd(event) {\r\n            touchEndX.value = event.changedTouches[0].clientX;\r\n            handleSwipe();\r\n        }\r\n\r\n        function handleSwipe() {\r\n            if (touchEndX.value - touchStartX.value > 100) {\r\n                images.list.forEach((image, index) => {\r\n                    if (index < 5) {\r\n                        images.list[index].hidden = true;\r\n                    } else {\r\n                        images.list[index].hidden = false;\r\n                    }\r\n                });\r\n            } else if (touchStartX.value - touchEndX.value > 100) {\r\n                images.list.forEach((image, index) => {\r\n                    if (index < 5) {\r\n                        images.list[index].hidden = false;\r\n                    } else {\r\n                        images.list[index].hidden = true;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        return {\r\n            images,\r\n            handleTouchStart,\r\n            handleTouchEnd,\r\n            scrollBarWidth\r\n        };\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\nimg {\r\n    width: 1rem;\r\n    height: 1rem;\r\n    border-radius: 100%;\r\n    background: rgb(254, 90, 89);\r\n}\r\n\r\n.swipe {\r\n    display: flex;\r\n    overflow-y: auto;\r\n    text-align: center;\r\n    position: relative;\r\n}\r\n\r\n.swipe::-webkit-scrollbar {\r\n    display: none;\r\n}\r\n\r\n.swipe span {\r\n    margin: 18px 0px 0px 21.5px;\r\n}\r\n\r\n.swipe p {\r\n    font-size: 0.1rem;\r\n    align-items: center;\r\n    opacity: 0.7;\r\n}\r\n\r\n.hidden {\r\n    display: none;\r\n}\r\n\r\n.scrollBar {\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 0;\r\n    height: 4px;\r\n    background-color: #ccc;\r\n    border-radius: 2px;\r\n}\r\n</style>"],"mappings":"AAWA,SAASA,OAAM,QAAS,uBAAuB;AAC/C,SAASC,QAAQ,EAAEC,GAAG,EAAEC,SAAQ,QAAS,KAAK;AAE9C,eAAe;EACXC,KAAKA,CAAA,EAAG;IACJ,MAAMC,MAAK,GAAIJ,QAAQ,CAAC;MACpBK,IAAI,EAAE;IACV,CAAC,CAAC;IAEF,MAAMC,WAAU,GAAIL,GAAG,CAAC,CAAC,CAAC;IAC1B,MAAMM,SAAQ,GAAIN,GAAG,CAAC,CAAC,CAAC;IACxB,MAAMO,cAAa,GAAIP,GAAG,CAAC,CAAC,CAAC;IAE7BC,SAAS,CAAC,YAAY;MAClB,IAAI;QACA,MAAMO,GAAE,GAAI,MAAMV,OAAO,CAAC,CAAC;QAC3BK,MAAM,CAACC,IAAG,GAAII,GAAG,CAACC,IAAI,CAACA,IAAI;QAC3BF,cAAc,CAACG,KAAI,GAAKP,MAAM,CAACC,IAAI,CAACO,MAAK,GAAI,GAAG,GAAI,CAAC;MACzD,EAAE,OAAOC,KAAK,EAAE;QACZC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACxB;IACJ,CAAC,CAAC;IAEF,SAASE,gBAAgBA,CAACC,KAAK,EAAE;MAC7BV,WAAW,CAACK,KAAI,GAAIK,KAAK,CAACC,OAAO,CAAC,CAAC,CAAC,CAACC,OAAO;IAChD;IAEA,SAASC,cAAcA,CAACH,KAAK,EAAE;MAC3BT,SAAS,CAACI,KAAI,GAAIK,KAAK,CAACI,cAAc,CAAC,CAAC,CAAC,CAACF,OAAO;MACjDG,WAAW,CAAC,CAAC;IACjB;IAEA,SAASA,WAAWA,CAAA,EAAG;MACnB,IAAId,SAAS,CAACI,KAAI,GAAIL,WAAW,CAACK,KAAI,GAAI,GAAG,EAAE;QAC3CP,MAAM,CAACC,IAAI,CAACiB,OAAO,CAAC,CAACC,KAAK,EAAEC,KAAK,KAAK;UAClC,IAAIA,KAAI,GAAI,CAAC,EAAE;YACXpB,MAAM,CAACC,IAAI,CAACmB,KAAK,CAAC,CAACC,MAAK,GAAI,IAAI;UACpC,OAAO;YACHrB,MAAM,CAACC,IAAI,CAACmB,KAAK,CAAC,CAACC,MAAK,GAAI,KAAK;UACrC;QACJ,CAAC,CAAC;MACN,OAAO,IAAInB,WAAW,CAACK,KAAI,GAAIJ,SAAS,CAACI,KAAI,GAAI,GAAG,EAAE;QAClDP,MAAM,CAACC,IAAI,CAACiB,OAAO,CAAC,CAACC,KAAK,EAAEC,KAAK,KAAK;UAClC,IAAIA,KAAI,GAAI,CAAC,EAAE;YACXpB,MAAM,CAACC,IAAI,CAACmB,KAAK,CAAC,CAACC,MAAK,GAAI,KAAK;UACrC,OAAO;YACHrB,MAAM,CAACC,IAAI,CAACmB,KAAK,CAAC,CAACC,MAAK,GAAI,IAAI;UACpC;QACJ,CAAC,CAAC;MACN;IACJ;IAEA,OAAO;MACHrB,MAAM;MACNW,gBAAgB;MAChBI,cAAc;MACdX;IACJ,CAAC;EACL;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}